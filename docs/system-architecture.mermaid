graph TB
    %% Styles
    classDef client fill:#f9f,stroke:#333,stroke-width:2px;
    classDef frontend fill:#d4f1f4,stroke:#333,stroke-width:2px;
    classDef backend fill:#d4e1f4,stroke:#333,stroke-width:2px;
    classDef database fill:#f4d4d4,stroke:#333,stroke-width:2px;
    classDef ml fill:#e1f4d4,stroke:#333,stroke-width:2px;

    subgraph Client_Side [Client Side]
        Browser[Web Browser / User]:::client
    end

    subgraph AltCred_System [AltCred System]
        
        subgraph Frontend_Layer [Frontend (Next.js)]
            UI_Pages[Pages / UI Components]:::frontend
            API_Client[API Client Utility]:::frontend
            Auth_State[Auth State (LocalStorage)]:::frontend
        end

        subgraph Backend_Layer [Backend (Node.js/Express)]
            API_Gateway[API Routes / Middleware]:::backend
            
            subgraph Services
                Auth_Service[Auth Service]:::backend
                Intake_Service[Intake Service]:::backend
                Score_Service[Credit Score Service]:::backend
            end
            
            ML_Engine[ML Scoring Engine]:::ml
        end

        subgraph Data_Layer [Supabase (PostgreSQL)]
            DB_Users[Users Table]:::database
            DB_Answers[User Answers Table]:::database
            DB_Scores[Credit Scores Table]:::database
        end
    end

    %% Flows
    Browser -->|Interacts| UI_Pages
    UI_Pages -->|Uses| API_Client
    UI_Pages -->|Reads| Auth_State
    
    API_Client -->|HTTPS / JSON| API_Gateway
    
    API_Gateway -->|/auth/*| Auth_Service
    API_Gateway -->|/intake/*| Intake_Service
    API_Gateway -->|/credit-score/*| Score_Service

    Auth_Service -->|CRUD| DB_Users
    Intake_Service -->|Insert| DB_Answers
    
    Score_Service -->|Fetch Latest| DB_Answers
    Score_Service -->|Calculate| ML_Engine
    Score_Service -->|Save Result| DB_Scores
    
    ML_Engine -->|Returns Score & Factors| Score_Service

    %% Data Relationships
    DB_Answers -.->|FK: user_id| DB_Users
    DB_Scores -.->|FK: user_id| DB_Users
